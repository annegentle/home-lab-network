# Generating Code from Postman

REST clients like Postman let you focus on API calls while ignoring the specifics of any particular programming language. You can easily experiment, test, save, document, and share those API calls. But at the end of it all, you likely want to take the next step of including the API calls into some program, as shown on the right side of this next figure.

![alt text](/posts/files/02-postman-03-home-lab-postman-etc/assets/images/desktop-3-20.png)

Your real-life testing and development can take a similar path: you learn the API, you test the API calls in Postman, and then you can copy/paste the code generated by Postman into your own Python programs. This next page of the lab shows how to take that last step to take the work done in Postman to create Python code for your programs.

## Finding the Code for an API Call

1.  To begin, make sure you navigate to a page with the small “Code” word in the window. To do so, use these steps that match the lettered items in the next figure:

    - **(A)** Click the name of the Collection on the left, preferably the “WO DevNet Example 1” Collection you imported earlier, to expand the list of API calls.

    - **(B)** Click the POST request to populate the details of the POST request on the right side of the window.

    - **(C)** Look on the far right, and find the word “code”, and note its location.

 ![alt text](/posts/files/02-postman-03-home-lab-postman-etc/assets/images/desktop-3-21.png)

2.  Display Python’s Code pop-up Window and display the list of code options by:

    - **(A)** Clicking the word “Code” (as seen in the previous figure).

    - **(B)** On the resulting popup, click the down arrow to open the drop-down menu, which lists the supported languages. The next figure shows the list.

 ![alt text](/posts/files/02-postman-03-home-lab-postman-etc/assets/images/desktop-3-22.png)

3.  Find the Python language option that uses the Python Requests module, causing the Python code to be displayed in the window. To do so:

    - **(A)** Click the Python drop-down menu option.

    - **(B)** Click the Requests option from the submenu.

    - **(C)** Postman displays the Python code in a new window; a sample window is shown as the next figure.

 ![alt text](/posts/files/02-postman-03-home-lab-postman-etc/assets/images/desktop-3-23.png)

4.  Take some time to review the Python code. Of note:

    - It imports the Python Requests module. Requests is a popular Python module for making REST API calls so that the programmer can avoid the details of creating all the detailed fields in an HTTP message.

    - It lists a URL for the DevNet Always-on APIC-EM Sandbox.

    - The remaining details in this example show the correct syntax for calling the requests module, passing the parameters that matter for a correct POST request to APIC-EM.

## Testing the Code in a Python Interpreter Session

You can copy the Python code from that window, copy it into your own Python program, and use it to make the appropriate API calls. You can also copy/paste the code into a Python interpreter session and see it work. Let’s do that to complete the process of moving from REST client to Python code.

1.  Open a command shell on your computer.

2.  Start an interactive Python interpreter session in either Python 2 or 3, using the commands in the table below for your OS:

 ![alt text](/posts/files/02-postman-03-home-lab-postman-etc/assets/images/desktop-3-table-1.png)

3.  Copy the Python code from Postman as of the last Postman step listed on this page. That is, the window should list Python code, using the Requests module, and you simply click the “copy to clipboard” button.

2.  Paste the Python code into the interactive interpreter window.

You should see some results similar to the below:


```
>>> import requests
>>> url = "https://devnetapi.cisco.com/sandbox/apic\_em/api/v1/ticket"
>>> payload = "{\\n    \\"username\\": \\"devnetuser\\",\\n    \\"password\\": \\"Cisco123!\\"\\n}"
>>> headers = {
...     'content-type': "application/json",
...     'cache-control': "no-cache",
...     'postman-token': "4b056eec-cc24-cd8d-b41a-592ed6ec0f47"
...     }
>>> 
>>> response = requests.request("POST", url, data=payload, headers=headers)
>>> print(response.text)
{"response":{"serviceTicket":"ST-11417-K1LekX2joCY5cWduIa0H-cas","idleTimeout":1800,"sessionTimeout":21600},"version":"1.0"}
>>> 
```
Note that the last few lines of text that do not begin with “>>>” are the lines that list the JSON-formatted data returned by the API call. Most notably in this particular API call, the output includes the service ticket, which is used by APIC-EM for authentication of future GET requests.

Also, if your code does not execute, here are some common issues:

-   If the **import requests** statement fails, you may not have installed the requests module. Review the second Learning Lab in this module, “Home Lab: Python Libraries (PIP) and Virtual Environments”, for advice on using PIP to install requests.
-   If you attempted a GET request, note that the GET requests must have a valid authentication token (service ticket) as built with the sample POST request. Feel free to test the GET requests, realizing you need to run the POST request first, and copy/paste the token into your GET requests, to ensure they succeed.

Finally, as a brief aside, the code generation feature of Postman and other tools is a great place to start, but do not be afraid to change the code. It’s just a starting place.
