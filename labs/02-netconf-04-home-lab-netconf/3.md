# Prepare a Python 3.x Virtual Environment

This section walks through steps to prepare for NETCONF/YANG experiments. That process begins with thinking about the Python version, some Python libraries to install, and a Python virtual environment.

## Evaluating Which Python Version/Release to Use

For real scenarios, the question of the specific version/release of Python to use when working with NETCONF/YANG changes over time. When writing this lab, I asked some of the experts for advice. Their answers may change over time. That said, in different conditions we advise:

-   Prefer Python 3.x over 2.7.
-   For Python 3.x versions, use 3.6.
-   If you have Python 2.7 installed and simply want to start, prefer 2.7.12 or newer.

For this lab exercise, use Python 2.7, 3.5, or 3.6. However, a combination of factors might impact which commands and parameters work in certain environments for Windows, Linux, and Mac. This lab shows steps that use a default Python 3 interpreter. The exercise steps ask you to create a virtual environment using a default Python 3.x version to simplify the later lab steps (besides being useful as an end to itself).

If you want to do this lab and use a non-default Python 3.x installed on your system, create a virtual environment that uses the non-default Python 3.x version. After configuring your system the rest of the lab steps that use an activated virtual environment should work as listed. To create a virtual environment, check the [virtualenv documentation](https://virtualenv.pypa.io/en/stable/reference/).

For example, if on a Linux system where your default Python 3.x is a pre-installed release of Python 3.5, but you have also installed Python 3.6, the command **virtualenv venv --python=python3.6** would create a virtual environment that uses the Python 3.6 interpreter.

Finally, if you prefer to use the default Python 2.x version on your system you can use the same steps listed, but substitute the following:

-   (Windows): For each command that begins **py -3**, use **py -2** instead.
-   (Linux/Mac): For each command that begins **python3**, use **python** instead.

## Considering the Use of a Virtual Environment for this Lab

As discussed in Learning Lab “Home Lab: Python Libraries (PIP) and Virtual Environments” in this same [Learning Module](https://learninglabs.cisco.com/modules/home-lab-desktop), virtual environments provide many useful features, using a virtual environment for each project is a good habit. This lab shows the creation and use of a virtual environment throughout the lab. Once created, you can use the **python** and **pip** commands knowing that these commands apply to the virtual environment, as shown in the figure.

![alt text](/posts/files/02-netconf-04-home-lab-netconf/assets/images/desktop-4-03.png)


You may choose to do the lab and not use a virtual environment, but the lab steps assume the use of the virtual environment as shown here. Check out the second lab in the “[Home Lab: Setting up Your Desktop OS for Network Programmability](https://learninglabs.cisco.com/modules/home-lab-desktop)” Learning Module, for the lab about PIP and virtual environments for more background info.

## Exercise: (Re)Installing the Virtualenv Package

To make sure you can create the virtual environment, walk through the process of installing (or refreshing) the virtualenv package. This section assumes you have Python 3.x and the associated PIP already installed.

At this step, you use PIP to install the virtualenv package for the default Python 3.x version on your system. To (re)install the virtualenv tool for Python 3.x:

1.  Open a new command shell (for Windows, [start the shell as an administrator](https://technet.microsoft.com/en-us/library/cc947813.aspx)).
2.  Use the following commands to confirm the default Python 3.x version.
  -   Windows: the **py -3 -V**
  -   Linux/Mac: the **python3 -V**
3.  Call PIP for the default Python 3 with these commands. This step installs the default Python 3.x virtual environment tool, `virtualenv`.
  -   (Windows): the **py -3 -m pip install virtualenv** 
  -   (Linux/Mac): the **sudo -H python3 -m pip install virtualenv** 
4.  Confirm that the `virtualenv` tool is installed by listing its version.
  -   (Windows): **py -3 -m virtualenv --version**
  -   (Linux/Mac): **python3 -m virtualenv --version**
  -   (Windows) Close the command shell, because later steps do not need to be run as administrator.

At this point, you should be ready to create the virtual environment.

## Exercise: Creating the Virtual Environment

The next lab steps assume you have installed the virtualenv tool for Python 3.x.

Next, create a new /NC01 subdirectory in your home directory as a place to keep files for this lab exercise. Then create a new virtual environment, whose files reside in a /venv subdirectory, as shown in the following figure.

![alt text](/posts/files/02-netconf-04-home-lab-netconf/assets/images/desktop-4-04.png)


With that directory structure, follow these steps to create and activate the virtual environment:

1.  Open a new command shell.
2.  As needed, move to your home directory using these commands:
  -   (Windows): **cd %HOMEPATH%**
  -   Linux/Mac: **cd ~**
3.  Confirm the location of your home directory with these commands:
  -   (Windows): **cd**
  -   (Linux/Mac): **pwd**
4.  Make the lab exercise project directory: **mkdir NC01**.
5.  Change to that directory with the **cd NC01** command.
6.  Create the virtual environment that uses the default Python 3.x on your system, with `venv` as the directory name, with these commands:
    -   (Windows): **py -3 -m virtualenv venv**
    -   (Linux/Mac): **python3 -m virtualenv venv**
7.  Keep the command shell open.

## Exercise: Activating and Using the Virtual Environment

At this point, the virtual environment exists and must be activated. The activation step installs libraries with PIP, runs Python within the environment, and so on. To use a virtual environment, repeat the steps to activate the virtual environment.

1.  Continue using the same command prompt.
2.  If not already there, change directories to move to the project directory (for example, **cd NC01** if you are in your home directory).

> Note: The steps here use a specific directory so that the commands that list directories are correct relative to the current directory.

3.  Activate the virtual environment by executing the **activate** script in the virtual environment’s directory, using the appropriate command from the following table. The commands assume the virtual environment installed in a `venv` subdirectory.

![alt text](/posts/files/02-netconf-04-home-lab-netconf/assets/images/desktop-4-table-01.png)

4.  To confirm the version of Python used with this virtual environment, use the **python -V** command.
5.  Keep the command shell open.

When finished with the virtual environment at any time, close the command shell, or use the `deactivate` commands to deactivate it. When you return, repeat the activate steps to reactivate it.
